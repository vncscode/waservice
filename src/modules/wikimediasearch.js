const axios = require('axios')
const cheerio = require('cheerio')

function wikimedia(title) {
    return new Promise((resolve) => {
        axios.get(`https://commons.wikimedia.org/w/index.php?search=${title}&title=Special:MediaSearch&go=Go&type=image`)
            .then((res) => {
                let $ = cheerio.load(res.data)
                let hasil = []
                $('.sdms-search-results__list-wrapper > div > a').each(function (a, b) {
                    hasil.push({
                        title: $(b).find('img').attr('alt'),
                        source: $(b).attr('href'),
                        image: $(b).find('img').attr('data-src') || $(b).find('img').attr('src')
                    })
                })
                resolve(hasil)
            })
    })
}


module.exports = { wikimedia }